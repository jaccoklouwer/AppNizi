using System;
using System.IO;
using System.Net;
using System.Reflection;
using System.Threading.Tasks;

using Aliencube.AzureFunctions.Extensions.OpenApi;
using Aliencube.AzureFunctions.Extensions.OpenApi.Abstractions;
using Aliencube.AzureFunctions.Extensions.OpenApi.Attributes;
using Aliencube.AzureFunctions.Extensions.OpenApi.Extensions;
using AppNiZiAPI.Models;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Azure.WebJobs;
using Microsoft.Azure.WebJobs.Extensions.Http;
using Microsoft.Extensions.Logging;
using Microsoft.OpenApi;

using Newtonsoft.Json;

namespace AppNiZiAPI.Functions
{
    public static class SwaggerFunctions
    {
        private static AppSettings settings = new AppSettings();
        private static IDocument doc = new Document(new DocumentHelper());
        private static ISwaggerUI swaggerUI = new SwaggerUI();

        [FunctionName(nameof(RenderOpenApiDocument))]
        [OpenApiIgnore]
        public static async Task<IActionResult> RenderOpenApiDocument(
        [HttpTrigger(AuthorizationLevel.Anonymous, "get", Route = "swagger/{version}.{extension}")] HttpRequest req,
        string version,
        string extension,
        ILogger log)
        {
            var ver = GetSpecVersion(version);
            var ext = GetExtension(extension);

            var settings = new AppSettings();
            var helper = new DocumentHelper();
            var document = new Document(helper);
            var result = await document.InitialiseDocument()
                                       .AddMetadata(settings.OpenApiInfo)
                                       .AddServer(req, settings.HttpSettings.RoutePrefix)
                                       .Build(Assembly.GetExecutingAssembly())
                                       .RenderAsync(ver, ext)
                                       .ConfigureAwait(false);
            string jsonstring = "{ \"openapi\": \"3.0.1\", \"info\": { \"title\": \"App Nizi API\", \"description\": \"The API for the App Nizi\", \"termsOfService\": \"https://github.com/jaccoklouwer/AppNizi\", \"contact\": { \"name\": \"The High Fives\", \"url\": \"https://github.com/jaccoklouwer/AppNizi/issues\", \"email\": \"no-reply@theHighFives.com\" }, \"license\": { \"name\": \"MIT\", \"url\": \"http://opensource.org/licenses/MIT\" }, \"version\": \"3.0.0\" }, \"servers\": [{ \"url\": \"https://appnizi-api.azurewebsites.net/api\" }], \"paths\": { \"/v1/consumption/{consumptionId}\": { \"delete\": { \"tags\": [ \"Consumption\" ], \"summary\": \"Deletes a consumption by id\", \"description\": \"Deletes a consumption of a patient by id. Only available for patient.\", \"operationId\": \"DeleteConsumptionById\", \"parameters\": [{ \"name\": \"consumptionId\", \"in\": \"path\", \"description\": \"the id of the consumption that is going to be deleted\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Removing Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect id\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"get\": { \"tags\": [ \"Consumption\" ], \"summary\": \"Gets a consumption by id\", \"description\": \"Gets a consumption of a patient by id. Available for patient and doctor of patient.\", \"operationId\": \"GetConsumptionById\", \"parameters\": [{ \"name\": \"consumptionId\", \"in\": \"path\", \"description\": \"the id of the consumption that is targeted\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of ConsumptionView\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/ConsumptionView\" } } } }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect id\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"put\": { \"tags\": [ \"Consumption\" ], \"summary\": \"Updates a consumption\", \"description\": \"Updates a consumption of a patient by using the consumption id located in the url path and the consumption data from the requestbody. Only available for patient.\", \"operationId\": \"UpdateConsumptionById\", \"parameters\": [{ \"name\": \"consumptionId\", \"in\": \"path\", \"description\": \"the id of the consumption that is targeted\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Consumption\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect id\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/consumptions\": { \"get\": { \"tags\": [ \"Consumption\" ], \"summary\": \"Gets all consumptions for a patient between 2 dates\", \"description\": \"Gets all consumptions for a patientid between a startdate and enddate. Available for patient and doctor of patient.\", \"operationId\": \"GetConsumptionsForPatientBetweenDates\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"query\", \"description\": \"the id of the patient which adds a consumption\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"startDate\", \"in\": \"query\", \"description\": \"the start date\", \"required\": true, \"schema\": { \"type\": \"string\" } }, { \"name\": \"endDate\", \"in\": \"query\", \"description\": \"the end date\", \"required\": true, \"schema\": { \"type\": \"string\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of PatientConsumptionsView\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientConsumptionsView\" } } } }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect id\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"post\": { \"tags\": [ \"Consumption\" ], \"summary\": \"Adds a consumption\", \"description\": \"Adds a consumption for a patient by using the consumption data from the requestbody. Only available for patient.\", \"operationId\": \"AddConsumption\", \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Consumption\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Inserting Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect id\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/food/{foodId}\": { \"get\": { \"tags\": [ \"Food\" ], \"summary\": \"Gets the requested FoodItem\", \"description\": \"updates the dietary management of a patient\", \"operationId\": \"GetFoodById\", \"parameters\": [{ \"name\": \"foodId\", \"in\": \"path\", \"description\": \"the id of food item to be retrieved\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Food\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Food\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/waterconsumption\": { \"post\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"New water consumption\", \"description\": \"New water consumption\", \"operationId\": \"InsertWaterConsumption\", \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionModel\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of WaterConsumptionModel\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionModel\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/waterconsumption/{waterId}\": { \"get\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"Get water consumption\", \"description\": \"Get water consumption\", \"operationId\": \"WaterConsumption\", \"parameters\": [{ \"name\": \"waterId\", \"in\": \"path\", \"description\": \"Single input id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Removing Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"422\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" }, \"put\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"Update water consumption\", \"description\": \"Update water consumption\", \"operationId\": \"UpdateWaterConsumption\", \"parameters\": [{ \"name\": \"waterId\", \"in\": \"path\", \"description\": \"Single input id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionModel\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of WaterConsumptionModel\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionModel\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" }, \"delete\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"Delete water consumption\", \"description\": \"Delete water consumption\", \"operationId\": \"DeleteWaterConsumption\", \"parameters\": [{ \"name\": \"waterId\", \"in\": \"path\", \"description\": \"Single input id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Removing Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"422\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/waterconsumption/daily/{patientId}\": { \"get\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"Get waterconsumption from a date\", \"description\": \"Get waterconsumption from a date\", \"operationId\": \"DailyWaterConsumption\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"Inserting the patientId\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"date\", \"in\": \"query\", \"description\": \"Inserting the date\", \"required\": true, \"schema\": { \"type\": \"string\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of WaterConsumptionDaily\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionDaily\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/waterconsumption/period/{patientId}\": { \"get\": { \"tags\": [ \"WaterConsumption\" ], \"summary\": \"Get waterconsumption from a date date\", \"description\": \"Get waterconsumption from a date date\", \"operationId\": \"WaterConsumptionPeriod\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"Inserting the patientId\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"beginDate\", \"in\": \"query\", \"description\": \"Inserting the bein date\", \"required\": true, \"schema\": { \"type\": \"string\" } }, { \"name\": \"endDate\", \"in\": \"query\", \"description\": \"Inserting the end date\", \"required\": true, \"schema\": { \"type\": \"string\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of WaterConsumptionViewModel[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/WaterConsumptionViewModel\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/patients\": { \"get\": { \"tags\": [ \"Patient\" ], \"summary\": \"Get all patients\", \"description\": \"Get all patients\", \"operationId\": \"GetPatients\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"Inserting the patient id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"code\", \"in\": \"query\", \"schema\": { \"type\": \"string\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of Patient[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/patient\": { \"post\": { \"tags\": [ \"Patient\" ], \"summary\": \"Register a new patient\", \"description\": \"Register a new patient\", \"operationId\": \"RegisterPatient\", \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/SwaggerRegisterPatient\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of PatientLogin\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientLogin\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/patient/{patientId}\": { \"get\": { \"tags\": [ \"Patient\" ], \"summary\": \"Get specific patient\", \"description\": \"Get specific patient\", \"operationId\": \"GetPatientByID\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"Inserting the patient id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Patient\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Patient\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"delete\": { \"tags\": [ \"Patient\" ], \"summary\": \"Delete a specific patient\", \"description\": \"Delete a specific patient\", \"operationId\": \"DeletePatient\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"Inserting the patient id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/meal/{patientId}/{mealId}\": { \"put\": { \"tags\": [ \"Meal\" ], \"summary\": \"Adds a meal\", \"description\": \"Updates the specified meal\", \"operationId\": \"PutMeal\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"The patient who is adding the meal\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"mealId\", \"in\": \"path\", \"description\": \"The id who is adding the meal\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"code\", \"in\": \"query\", \"schema\": { \"type\": \"string\" } } ], \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Meal\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of Meal\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Meal\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/meal/{patientId}\": { \"post\": { \"tags\": [ \"Meal\" ], \"summary\": \"Adds a meal\", \"description\": \"Adds a meal to the specified patient\", \"operationId\": \"AddMeal\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"The patient who is adding the meal\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Meal\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of Meal\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Meal\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"get\": { \"tags\": [ \"Meal\" ], \"summary\": \"Retrieves meals\", \"description\": \"retrieves the meals of the specified user\", \"operationId\": \"GetMeals\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"The patient which meals will be retrieved\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Meal[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/MealArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/meal\": { \"delete\": { \"tags\": [ \"Meal\" ], \"summary\": \"Deletes a meal\", \"description\": \"Removes the meal of the specified user\", \"operationId\": \"DeleteMeal\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"query\", \"description\": \"the id of the patient thats going to delete his meal\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"mealId\", \"in\": \"query\", \"description\": \"The meal to delete\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/food/partial/{foodName}/{count}\": { \"get\": { \"tags\": [ \"Food\" ], \"summary\": \"Searches the FoodDB\", \"description\": \"Allows you to search the food Database and gets items that start with the supplied letters\", \"operationId\": \"SearchFood\", \"parameters\": [{ \"name\": \"foodName\", \"in\": \"path\", \"description\": \"The letters to use in the search\", \"required\": true, \"schema\": { \"type\": \"string\" } }, { \"name\": \"count\", \"in\": \"path\", \"description\": \"amount of items to retrieve\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of Food[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/FoodArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/food/favorite/{patientId}\": { \"get\": { \"tags\": [ \"Food\" ], \"summary\": \"Gets the users favorite foods\", \"description\": \"Retrieves the favorited fooditems of the specified patientID\", \"operationId\": \"GetFavoriteFood\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"the id of the patient which items should be got\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Food[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/FoodArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/food/favorite\": { \"post\": { \"tags\": [ \"Food\" ], \"summary\": \"Makes a fooditem a favorite\", \"description\": \"Makes a supplied fooditem a favorite of the user and retrievable with getFavoriteFood\", \"operationId\": \"Add Favorite Food\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"query\", \"description\": \"the id of the patient thats favoriting the food\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"foodId\", \"in\": \"query\", \"description\": \"the fooditem to be favorited\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"delete\": { \"tags\": [ \"Food\" ], \"summary\": \"Unfavorites the fooditem\", \"description\": \"Deletes the connection between the patient and this fooditem in essence unfavoriting it\", \"operationId\": \"Delete Favorite Food\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"query\", \"description\": \"the id of the patient thats unfavoriting the food\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"foodId\", \"in\": \"query\", \"description\": \"the fooditem to be unfavorited\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }, { \"name\": \"code\", \"in\": \"query\", \"schema\": { \"type\": \"string\" } } ], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/doctor\": { \"get\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Get list of all doctors\", \"description\": \"Get list of all doctors\", \"operationId\": \"GetDoctors\", \"responses\": { \"200\": { \"description\": \"Payload of DoctorModel[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DoctorModelArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"post\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Register a new doctor\", \"description\": \"Register a new doctor\", \"operationId\": \"RegisterDoctor\", \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/SwaggerRegisterDoctor\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of DoctorLogin\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DoctorLogin\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/doctor/{doctorId}\": { \"get\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Get doctor by id\", \"description\": \"Get doctor by id\", \"operationId\": \"GetDoctorById\", \"parameters\": [{ \"name\": \"doctorId\", \"in\": \"path\", \"description\": \"Inserting the doctor id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of DoctorModel\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DoctorModel\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" }, \"delete\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Delete specific doctor\", \"description\": \"Delete specific doctor\", \"operationId\": \"DeleteDoctor\", \"parameters\": [{ \"name\": \"doctorId\", \"in\": \"path\", \"description\": \"Inserting the doctor id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Patient[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"409\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/doctor/{doctorId}/patients\": { \"get\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Get the patients from a doctor\", \"description\": \"Get the patients from a doctor\", \"operationId\": \"GetDoctorPatients\", \"parameters\": [{ \"name\": \"doctorId\", \"in\": \"path\", \"description\": \"Inserting the doctor id\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"responses\": { \"200\": { \"description\": \"Payload of Patient[]\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientArray\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"403\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/dietaryManagement/{dietId}\": { \"put\": { \"tags\": [ \"DietaryManagement\" ], \"summary\": \"Updates a dietary managment\", \"description\": \"updates the dietary management of a patient\", \"operationId\": \"UpdateDietaryManagement\", \"parameters\": [{ \"name\": \"dietId\", \"in\": \"path\", \"description\": \"the id of the diet that is going to be updated\", \"required\": true, \"schema\": { \"type\": \"integer\", \"format\": \"int32\" } }], \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DietaryManagementModel\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Updating Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"422\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Missing values\" } }, \"x-ms-visibility\": \"important\" }, \"delete\": { \"tags\": [ \"DietaryManagement\" ], \"summary\": \"Delete a dietary managment\", \"description\": \"Delete a dietary managment of a patient\", \"operationId\": \"DeleteDietaryManagement\", \"parameters\": [{ \"name\": \"dietId\", \"in\": \"path\", \"description\": \"the id of the diet that is going to be updated\", \"required\": true, \"schema\": { \"type\": \"string\" } }], \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Removing Data Successfully\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"422\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/dietaryManagement\": { \"post\": { \"tags\": [ \"DietaryManagement\" ], \"summary\": \"Create anew dietary managment\", \"description\": \"Create anew dietary managment of a patient\", \"operationId\": \"CreateDieataryManagement\", \"requestBody\": { \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DietaryManagementModel\" } } } }, \"responses\": { \"200\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Inserting Data Successfully\" }, \"400\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"422\": { \"description\": \"Payload of String\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/String\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/dietaryManagement/{patientId}\": { \"get\": { \"tags\": [ \"DietaryManagement\" ], \"summary\": \"Updates a dietary managment\", \"description\": \"updates the dietary management of a patient\", \"operationId\": \"GetDietaryManagementByPatient\", \"parameters\": [{ \"name\": \"patientId\", \"in\": \"path\", \"description\": \"the id of the diet that is going to be updated\", \"required\": true, \"schema\": { \"type\": \"string\" } }], \"responses\": { \"200\": { \"description\": \"Payload of DietaryView\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DietaryView\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/login/doctor\": { \"get\": { \"tags\": [ \"Doctor\" ], \"summary\": \"Get User As Patient from Acces Token\", \"description\": \"Get User As Patient from Acces Token\", \"operationId\": \"LoginDoctor\", \"responses\": { \"200\": { \"description\": \"Payload of DoctorLogin\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/DoctorLogin\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } }, \"/v1/login/patient\": { \"get\": { \"tags\": [ \"Patient\" ], \"summary\": \"Get User As Patient from Acces Token\", \"description\": \"Get User As Patient from Acces Token\", \"operationId\": \"LoginPatient\", \"responses\": { \"200\": { \"description\": \"Payload of PatientLogin\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/PatientLogin\" } } }, \"x-ms-summary\": \"Result: OK\" }, \"400\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" }, \"401\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Authorization Error: No acces\" }, \"404\": { \"description\": \"Payload of Error\", \"content\": { \"application/json\": { \"schema\": { \"$ref\": \"#/components/schemas/Error\" } } }, \"x-ms-summary\": \"Incorrect values\" } }, \"x-ms-visibility\": \"important\" } } }, \"components\": { \"schemas\": { \"Consumption\": { \"type\": \"object\", \"properties\": { \"FoodName\": { \"type\": \"string\" }, \"KCal\": { \"type\": \"number\", \"format\": \"float\" }, \"Protein\": { \"type\": \"number\", \"format\": \"float\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"float\" }, \"Calium\": { \"type\": \"number\", \"format\": \"float\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"float\" }, \"Amount\": { \"type\": \"integer\", \"format\": \"int32\" }, \"WeightUnitId\": { \"type\": \"number\", \"format\": \"float\" }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Id\": { \"type\": \"integer\", \"format\": \"int32\" } } }, \"WaterConsumptionModel\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Amount\": { \"type\": \"number\", \"format\": \"double\" }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" } } }, \"Meal\": { \"type\": \"object\", \"properties\": { \"MealId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Name\": { \"type\": \"string\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"KCal\": { \"type\": \"number\", \"format\": \"double\" }, \"Protein\": { \"type\": \"number\", \"format\": \"double\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"double\" }, \"Calcium\": { \"type\": \"number\", \"format\": \"double\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"double\" }, \"PortionSize\": { \"type\": \"number\", \"format\": \"double\" }, \"WeightUnit\": { \"type\": \"string\" }, \"Picture\": { \"type\": \"string\" } } }, \"SwaggerRegisterDoctor\": { \"type\": \"object\", \"properties\": { \"firstName\": { \"type\": \"string\" }, \"lastName\": { \"type\": \"string\" }, \"location\": { \"type\": \"string\" } } }, \"DietaryManagementModel\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Description\": { \"type\": \"string\" }, \"Amount\": { \"type\": \"integer\", \"format\": \"int32\" }, \"IsActive\": { \"type\": \"boolean\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" } } }, \"SwaggerRegisterPatient\": { \"type\": \"object\", \"properties\": { \"firstName\": { \"type\": \"string\" }, \"lastName\": { \"type\": \"string\" }, \"dateOfBirth\": { \"type\": \"string\" }, \"weight\": { \"type\": \"number\", \"format\": \"float\" }, \"doctorId\": { \"type\": \"integer\", \"format\": \"int32\" } } }, \"String\": { \"type\": \"string\" }, \"Error\": { \"type\": \"object\", \"properties\": { \"Title\": { \"type\": \"string\" }, \"Description\": { \"type\": \"string\" } } }, \"ConsumptionView\": { \"type\": \"object\", \"properties\": { \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"ConsumptionId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FoodName\": { \"type\": \"string\" }, \"KCal\": { \"type\": \"number\", \"format\": \"float\" }, \"Protein\": { \"type\": \"number\", \"format\": \"float\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"float\" }, \"Calium\": { \"type\": \"number\", \"format\": \"float\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"float\" }, \"Amount\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Weight\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Unit\": { \"type\": \"string\" }, \"Short\": { \"type\": \"string\" } } }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"Valid\": { \"type\": \"boolean\" } } }, \"PatientConsumptionsView\": { \"type\": \"object\", \"properties\": { \"Consumptions\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"ConsumptionId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FoodName\": { \"type\": \"string\" }, \"KCal\": { \"type\": \"number\", \"format\": \"float\" }, \"Protein\": { \"type\": \"number\", \"format\": \"float\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"float\" }, \"Calium\": { \"type\": \"number\", \"format\": \"float\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"float\" }, \"Amount\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Weight\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Unit\": { \"type\": \"string\" }, \"Short\": { \"type\": \"string\" } } }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"Valid\": { \"type\": \"boolean\" } } } }, \"KCalTotal\": { \"type\": \"number\", \"format\": \"float\" }, \"ProteinTotal\": { \"type\": \"number\", \"format\": \"float\" }, \"FiberTotal\": { \"type\": \"number\", \"format\": \"float\" }, \"CaliumTotal\": { \"type\": \"number\", \"format\": \"float\" }, \"SodiumTotal\": { \"type\": \"number\", \"format\": \"float\" } } }, \"Food\": { \"type\": \"object\", \"properties\": { \"FoodId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Name\": { \"type\": \"string\" }, \"KCal\": { \"type\": \"number\", \"format\": \"double\" }, \"Protein\": { \"type\": \"number\", \"format\": \"double\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"double\" }, \"Calcium\": { \"type\": \"number\", \"format\": \"double\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"double\" }, \"PortionSize\": { \"type\": \"number\", \"format\": \"double\" }, \"WeightUnit\": { \"type\": \"string\" }, \"Picture\": { \"type\": \"string\" } } }, \"WaterConsumptionDaily\": { \"type\": \"object\", \"properties\": { \"Total\": { \"type\": \"number\", \"format\": \"double\" }, \"MinimumRestriction\": { \"type\": \"integer\", \"format\": \"int32\" }, \"WaterConsumptions\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"WeightUnit\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Unit\": { \"type\": \"string\" }, \"Short\": { \"type\": \"string\" } } }, \"Error\": { \"type\": \"boolean\" }, \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Amount\": { \"type\": \"number\", \"format\": \"double\" }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" } } } } } }, \"WaterConsumptionViewModel\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"WeightUnit\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Unit\": { \"type\": \"string\" }, \"Short\": { \"type\": \"string\" } } }, \"Error\": { \"type\": \"boolean\" }, \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Amount\": { \"type\": \"number\", \"format\": \"double\" }, \"Date\": { \"type\": \"string\", \"format\": \"date-time\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" } } } }, \"PatientArray\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"AccountId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"DateOfBirth\": { \"type\": \"string\", \"format\": \"date-time\" }, \"WeightInKilograms\": { \"type\": \"number\", \"format\": \"float\" }, \"Guid\": { \"type\": \"string\" } } } }, \"Patient\": { \"type\": \"object\", \"properties\": { \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"AccountId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"DateOfBirth\": { \"type\": \"string\", \"format\": \"date-time\" }, \"WeightInKilograms\": { \"type\": \"number\", \"format\": \"float\" }, \"Guid\": { \"type\": \"string\" } } }, \"MealArray\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"MealId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Name\": { \"type\": \"string\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"KCal\": { \"type\": \"number\", \"format\": \"double\" }, \"Protein\": { \"type\": \"number\", \"format\": \"double\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"double\" }, \"Calcium\": { \"type\": \"number\", \"format\": \"double\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"double\" }, \"PortionSize\": { \"type\": \"number\", \"format\": \"double\" }, \"WeightUnit\": { \"type\": \"string\" }, \"Picture\": { \"type\": \"string\" } } } }, \"FoodArray\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"FoodId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Name\": { \"type\": \"string\" }, \"KCal\": { \"type\": \"number\", \"format\": \"double\" }, \"Protein\": { \"type\": \"number\", \"format\": \"double\" }, \"Fiber\": { \"type\": \"number\", \"format\": \"double\" }, \"Calcium\": { \"type\": \"number\", \"format\": \"double\" }, \"Sodium\": { \"type\": \"number\", \"format\": \"double\" }, \"PortionSize\": { \"type\": \"number\", \"format\": \"double\" }, \"WeightUnit\": { \"type\": \"string\" }, \"Picture\": { \"type\": \"string\" } } } }, \"DoctorModelArray\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"Location\": { \"type\": \"string\" } } } }, \"DoctorLogin\": { \"type\": \"object\", \"properties\": { \"Account\": { \"type\": \"object\", \"properties\": { \"AccountId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Role\": { \"type\": \"string\" } } }, \"Doctor\": { \"type\": \"object\", \"properties\": { \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"Location\": { \"type\": \"string\" } } }, \"Auth\": { \"type\": \"object\", \"properties\": { \"Guid\": { \"type\": \"string\" }, \"Token\": { \"type\": \"object\", \"properties\": { \"Scheme\": { \"type\": \"string\" }, \"AccesCode\": { \"type\": \"string\" } } } } } } }, \"DoctorModel\": { \"type\": \"object\", \"properties\": { \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"Location\": { \"type\": \"string\" } } }, \"DietaryView\": { \"type\": \"object\", \"properties\": { \"restrictions\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Description\": { \"type\": \"string\" } } } }, \"DietaryManagements\": { \"type\": \"array\", \"items\": { \"type\": \"object\", \"properties\": { \"Id\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Description\": { \"type\": \"string\" }, \"Amount\": { \"type\": \"integer\", \"format\": \"int32\" }, \"IsActive\": { \"type\": \"boolean\" }, \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" } } } } } }, \"PatientLogin\": { \"type\": \"object\", \"properties\": { \"Account\": { \"type\": \"object\", \"properties\": { \"AccountId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"Role\": { \"type\": \"string\" } } }, \"Patient\": { \"type\": \"object\", \"properties\": { \"PatientId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"AccountId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"DateOfBirth\": { \"type\": \"string\", \"format\": \"date-time\" }, \"WeightInKilograms\": { \"type\": \"number\", \"format\": \"float\" }, \"Guid\": { \"type\": \"string\" } } }, \"Doctor\": { \"type\": \"object\", \"properties\": { \"DoctorId\": { \"type\": \"integer\", \"format\": \"int32\" }, \"FirstName\": { \"type\": \"string\" }, \"LastName\": { \"type\": \"string\" }, \"Location\": { \"type\": \"string\" } } }, \"AuthLogin\": { \"type\": \"object\", \"properties\": { \"Guid\": { \"type\": \"string\" }, \"Token\": { \"type\": \"object\", \"properties\": { \"Scheme\": { \"type\": \"string\" }, \"AccesCode\": { \"type\": \"string\" } } } } } } } }, \"securitySchemes\": { \"bearerAuth\": { \"type\": \"http\", \"scheme\": \"bearer\", \"bearerFormat\": \"JWT\" } } }, \"security\": [{ \"bearerAuth\": [] }] } ";

            var response = new ContentResult()
            {
                Content = jsonstring,
                ContentType = "application/json",
                StatusCode = (int)HttpStatusCode.OK
            };

            
            return response;
        }

        private static OpenApiFormat GetExtension(string extension)
        {
            if (extension.ToLower() == "json")
            {
                return OpenApiFormat.Json;
            }
            else {
                return OpenApiFormat.Yaml;
            }
        }

        private static OpenApiSpecVersion GetSpecVersion(string version)
        {
            if (version.Contains("2"))
            {
                return OpenApiSpecVersion.OpenApi2_0;
            }
            else {
                return OpenApiSpecVersion.OpenApi3_0;
            }
        }

        [FunctionName(nameof(RenderSwaggerUI))]
        [OpenApiIgnore]
        public static async Task<IActionResult> RenderSwaggerUI(
    [HttpTrigger(AuthorizationLevel.Anonymous, "get", Route = "swagger/ui")] HttpRequest req,
    ILogger log)
        {
            var settings = new AppSettings();
            var ui = new SwaggerUI();
            var result = await ui.AddMetadata(settings.OpenApiInfo)
                                 .AddServer(req, settings.HttpSettings.RoutePrefix)
                                 .BuildAsync()
                                 .RenderAsync("swagger/v3.json", settings.SwaggerAuthKey)
                                 .ConfigureAwait(false);
            var response = new ContentResult()
            {
                Content = result,
                ContentType = "text/html",
                StatusCode = (int)HttpStatusCode.OK
            };

            return response;
        }
    }
}